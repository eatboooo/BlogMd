---
title: Java编程思想
date: 2020/9/14
categories:
- 笔记
- Java
- 基础
tags:
- 笔记
- Java
- 基础
src: //eatboooo.gitee.io/img/background/Java_thread_h.jpg
---
# Java编程思想

## 简介

- Java 与 C++ 相比最核心的变化就是加入了“虚拟机”和“垃圾回收机制”

## 1 对象的概念

- 抽象

  1. 万物皆对象
  2. 程序是一组对象，通过消息传递来告知彼此该做什么
  3. 每个对象都有自己的存储空间，可容纳其他对象
  4. 每个对象都有一种类型
  5. 同一类所有对象都鞥呢接收相同的消息

  > *Grady Booch* 提供了对对象更简洁的描述：一个对象具有自己的状态，行为和标识。这意味着对象有自己的内部数据(提供状态)、方法 (产生行为)，并彼此区分（每个对象在内存中都有唯一的地址）

- 接口
  - 亚里士多德（*Aristotle*）大概是第一个认真研究“类型”的哲学家，他曾提出过“鱼类和鸟类”这样的概念。

- 封装
  - 访问控制
    - 让应用程序员不要触摸他们不应该触摸的部分。（请注意，这也是一个哲学决策。部分编程语言认为如果程序员有需要，则应该让他们访问细节部分。）
    - 使类库的创建者（研发程序员）在不影响后者使用的情况下完善更新工具库。例如，我们开发了一个功能简单的工具类，后来发现可以通过优化代码来提高执行速度。假如工具类的接口和实现部分明确分开并受到保护，那我们就可以轻松地完成改造。
  - 如果你不使用 public、private、protected 这三者，则默认使用 default。default 被称为包访问。

## 2 安装Java和本书用例

- 发现一个 windows 超好用的程序包管理器 [choco](https://chocolatey.org/)

  > 记得用管理员方式运行 powershell.exe

## 3 万物皆对象

> 如果我们说另外一种不同的语言，我们会发觉一个不同的世界！— Ludwig Wittgenstein (1889-1951)

- 对象操纵

  > “名字代表什么？玫瑰即使不叫玫瑰，也依旧芬芳”。（引用自 莎士比亚，《罗密欧与朱丽叶》）

  - 只要拥有对象的“引用”，就可以操纵该“对象”

- 数据存储

  1. 寄存器（Registers），最快的存储区域，位于 CPU 内部。然而，寄存器的数量十分有限，所以寄存器根据需求进行分配。我们对其没有直接的控制权，也无法再自己的程序里找到寄存器存在的踪迹。（另一方面，C/C++ 允许开发者像编译器建议寄存器的分配）
  2. 栈内存（Stack），存在于常规内存 RAM（随机访问存储器，Random Access Memory）区域中，可以通过栈指针获得处理器的直接支持。栈指针下移分配内存，上移释放内存。这是一种仅次于寄存器的非常快速有效的分配存储方式。创建程序时，Java 系统必须知道栈内保存的所有项的生命周期。这种约束限制了程序的灵活性。因此，虽然在栈内存上存在一些 Java 数据（如对象引用），但 Java 对象本身的数据却是保存在堆内存的。
  3. 堆内存（Heap），这是一种通用的内存池（也在 RAM 区域），所有 Java 对象都存在于其中。与栈内存不同，编译器不需要知道对象必须在堆内存上停留多长时间。因此，用堆内存保存数据更具灵活性。创建一个对象时，只需用 `new` 命令实例化对象即可，当执行代码时，会自动在堆中进行内存分配。这种灵活性是有代价的：分配和清理堆内存要比栈内存需要更多的时间（如果可以用 Java 在栈内存上创建对象，就像在 C++ 中那样的话）。随着时间的推移，Java 的堆内存分配机制现在已经非常快，因此这不是一个值得关心的问题了。
  4. 常量存储（Constant storage），常量值通常直接放在程序代码中，因为它们永远不会改变。如需严格保护，可考虑将它们置于只读存储器 ROM （只读存储器，Read Only Memory）中。
  5. 非 RAM 存储（Non-RAM storage），数据完全存在于程序之外，在程序未运行以及脱离程序控制后依然存在。两个主要的例子：（1）序列化对象：对象被转换为字节流，通常被发送到另一台机器；（2）持久化对象：对象被放置在磁盘上，即使程序终止，数据依然存在。这些存储的方式都是将对象转存于另一个介质中，并在需要时恢复成常规的、基于 RAM 的对象。Java 为轻量级持久化提供了支持。而诸如 JDBC 和 Hibernate 这些类库为使用数据库存储和检索对象信息提供了更复杂的支持。

- 基本类型的存储
  - Java 确定了每种基本类型的内存占用大小。 这些大小不会像其他一些语言那样随着机器环境的变化而变化。这种不变性也是 Java 更具可移植性的一个原因。

- 数组的存储
  - Java 的设计主要目标之一是安全性，在 Java 中，数组使用前需要被初始化，并且不能访问数组长度以外的数据。这种范围检查，是以每个数组上少量的内存开销及运行时检查下标的额外时间为代价的，但由此换来的安全性和效率的提高是值得的。（并且 Java 经常可以优化这些操作）
  - 当我们创建对象数组时，实际上是创建了一个引用数组，并且每个引用的初始值都为 **null** 。
- 作用域
  - Java 的变量只有在其作用域内才可用。（作用域就是{}里面的）

- 对象作用域
  - Java 对象与基本类型具有不同的生命周期。当我们用 `new` 关键字来创建 Java 对象是，它的生命周期将会超指出作用域。（Java 有自动回收） 